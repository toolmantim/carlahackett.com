@import "normalize-css/normalize";

$serif: 'Archer SSm A', 'Archer SSm B', serif;
$serif-sc: 'Archer SSm Smallcaps A', 'Archer SSm Smallcaps B', serif;

$dark-grey: #222;
$grey: #999;
$light-grey: #ddd;

$input-border-color: $light-grey;
$input-border-color-hover: darken($light-grey, 5%);
$input-border-color-focus: darken($light-grey, 12%);

$link-color: $dark-grey;
$link-color-hover: darken($dark-grey, 10%);

%transition {
  transition: all 200ms;
}

%small-caps {
  font-family: $serif-sc; text-transform: lowercase; font-weight: 500;
  i { font-family: $serif; font-style: italic; font-size: 80%; margin-left: .1em; margin-right: .1em; }
}

%display-table {
  display: table; border-collapse:collapse;
  > * {
    display: table-row;
    > * {
      display: table-cell;
      vertical-align: top;
      padding: 50px;
      width: 50%;
      + * { border-left: 1px solid $light-grey; }
    }
  }
}

@mixin high-dpi {
  @media (-webkit-min-device-pixel-ratio: 2), /* Webkit */
         (min-resolution: 192dpi)             /* Everyone else */ {
    @content;
  }
}

@-webkit-keyframes bounce {
  0%, 100% {-webkit-transform: translateY(0);}
  50% {-webkit-transform: translateY(-6px);}
}
@-webkit-keyframes shadow-bounce {
  0%, 100% {-webkit-transform: translateY(0);}
  50% {-webkit-transform: translateY(-2px);}
}

%bounce {
  -webkit-animation: .5s bounce both infinite;
}
%shadow-bounce {
  -webkit-animation: .5s shadow-bounce both infinite;
}
%sticky {
  position: -webkit-sticky;
  position: sticky;
}

html {
  font-family: $serif; line-height: 1.8; font-size: 15px; color: $grey; text-rendering: optimizeLegibility;
}

* { box-sizing: border-box; }

hr { border: none; border-top: 1px solid $light-grey; width: 100%; margin: 0; padding: 0; }

form {
  input, button {
    padding: 8px 10px;
    width: 100%;
    @extend %transition;
    &:focus { outline: none; }
  }
  input {
    font-size: 14px;
    border: 2px solid $input-border-color;
    &:hover { border-color: $input-border-color-hover; }
    &:focus, &:active { border-color: $input-border-color-focus; }
  }
  button {
    border: none;
    background: $input-border-color;
    color: #999;
    @extend %small-caps;
    text-align: center;
    padding: 10px 0;
    &:hover { background-color: $input-border-color-hover; }
    &:active, &:focus { background-color: $input-border-color-focus; }
  }
  > * + * { margin-top: 10px; }
}

a {
  color: $link-color;
  text-decoration: none;
  @extend %transition;
  &:hover, &:active { color: $link-color-hover; }
  &:hover { border-bottom: 1px solid $link-color; }
}

#header, main, body > footer, body > nav { max-width: 1300px; margin-left: auto; margin-right: auto; }

#header {
  margin-top: 50px; margin-bottom: 50px; line-height: 1;
  h1 {
    text-align: center;
    img { width: 400px; max-width: 400px; }
  }
}

.feature {
  > aside, > aside + * {
    display: inline-block;
    width: 50%;
    vertical-align: top;
    text-align: left;
    > :first-child { margin-top: 0; }
  }
  > aside {
    text-align: center; font-size: 14px;
    p { margin: 15px 0; }
    p + p { margin-top: -10px; }
  }

  > aside.image {
    width: 100%; max-width: 200px; margin-right: 40px;
    > img, > .icon { width: 100%; border-radius: 50%; }
    > .icon {
      background-color: $light-grey; display: inline-block;
    }
  }
  > div.text {
    h3 { @extend %small-caps; font-size: 100%; margin: 0 0 10px; }
    h3 + p { margin-top: 0; }
    p + h3 { margin-top: 25px; }
  }
  h2 {
    text-align: center; font-size: 21px; @extend %small-caps; margin-bottom: 50px; color: $grey;
    span {
      display: block;
    }
  }
}

.feature.about aside {
  p { margin-bottom: 12px; }
  p.title { font-family: $serif-sc; text-transform: lowercase; }
}

.feature.contact {
  p.address span { display: block; }
  .icon {
    position: relative;
    background: url(http://a.tiles.mapbox.com/v3/toolmantim.map-fu86hyqj/144.95954081799300,-37.77381393618836,15/200x200.png) center center;
    @include high-dpi {
      background: url(http://a.tiles.mapbox.com/v3/toolmantim.map-fu86hyqj/144.95954081799300,-37.77381393618836,15/200x200@2x.png) center center;
      background-size: 100% 100%;
    }
    img.pin { z-index: 2; position: relative; }
    img.shadow { position: absolute; top: 0; left: 0; opacity: .2; z-index: 1; -webkit-filter: blur(1px); }
    &:hover {
      img.pin    { @extend %bounce; }
      img.shadow { @extend %shadow-bounce; }
    }
  }
}

body > footer > div {
  @extend %display-table;
  > div:first-child > * { border-top: none; }
  > div > * { border-top: 1px solid $light-grey; }
}

main section.home {
  div.thumbnails {
    $size: 300px; line-height: 0; margin: 20px auto; text-align: center; max-width: 1200px;
    a {
      @extend %transition; display: inline-block;
      img { width: $size - 10px; height: $size - 10px; margin: 5px; border: 1px solid transparent; border: 1px solid rgba(0,0,0,.15); }
      &:hover {
        border: none; opacity: .9;
        img { border-color: rgba(0,0,0,.3); }
      }
    }
  }
}

section#project {
  width: 100%;
  .about, .photos {
    padding: 50px;
    display: block;
  }
  .about {
    width: 30%;
    float: right;
    padding-left: 0;
    vertical-align: top;
    @extend %sticky;
    top: 0;
    h2 {
      font: 300 36px $serif;
      line-height: 1;
      margin: 0 0 .5em;
      text-align: left;
      text-transform: none;
      &:before {
        content: 'Project';
        display: block;
        $grey: #aaa;
        text-transform: lowercase;
        font: 18px $serif-sc;
        line-height: 1;
        margin-bottom: .2em;
      }
    }
    blockquote {
      margin: 0; padding: 0; font-style: italic; font-size: 14px; margin-top: 1.5em; width: 90%;
      &:first-letter {
        margin-left: -.3em;
      }
    }
    .next-project {
      margin-top: 40px;
      h2 { display: block; margin-bottom: 0; }
      a {
        line-height: 1.5;
        h3 { font-family: $serif-sc; font-weight: normal; text-transform: lowercase; font-size: 100%; margin: 0; color: $grey; }
        span { font-size: 110%; }
      }
    }
  }
  .photos {
    width: 70%;
    img { margin: 0; padding: 3px 5px; }
    img.full { width: 100%; }
    img.half { width: 50%; }
    img.third { width: 33.333333%; }
  }
}

section.about-us {
  // width: 650px; margin: 0 auto; padding: 40px 0;
  h1 { font: 300 36px $serif; }
  h2 { font: 300 18px $serif; margin-top: 1.5em; }
  > .photos, > .text {
    width: 50%;
    padding-left: 50px;
    padding-right: 50px;
    display: inline-block;
    vertical-align: top;
    margin: 80px 0;
  }
  > .photos {
    padding-right: 30px;
    img { width: 100%; margin-bottom: 20px; }
  }
  > .text {
    @extend %sticky;
    top: 40px;
    font-size: 15px; line-height: 1.8;
    > *:first-child { margin-top: 0; }
  }
}


.feature.mailing-list, .feature.connect {
  padding-bottom: 100px;
}

.feature.mailing-list {
}


.feature.connect {
  vertical-align: middle; text-align: center;
  a {
    @extend %small-caps; margin-left: 10px; margin-right: 14px; line-height: 50px;
  }
}